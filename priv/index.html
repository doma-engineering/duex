<!DOCTYPE html>

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.2.0/jszip.js" async defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js" async defer></script>
  <script src="/index.js" defer></script>
</head>

<body>
  <section>
    <h1>Advanced file upload</h1>
    <form onsubmit="event.preventDefault(); saveAsZip(event);">
      <div>
        <button onclick="document.getElementById('__input_files').click()" type="button">Choose files</button>
        <input id="__input_files" type="file" multiple style="display:none" />

        <button onclick="document.getElementById('__input_folder').click()" type="button">Select folder</button>
        <input id="__input_folder" type="file" directory webkitdirectory mozdirectory
          style="background-color: aquamarine; display: none;" />
      </div>

      or

      <div id="__dropzone" effectAllowed="move" style="min-height: 50px; background: silver; border: 2px dotted gold">
        Drop files or folders here
      </div>

      <input type="submit" value="Download as zip">
    </form>

    Files: <div id="__files"></div>
  </section>
  <section>
    <h1>Upload single file</h1>
    <div class="component">
      <input class="filePicker" type="file">
      <div id="captcha--single_upload"></div>
      <button onclick="uploadSingleFile(this)">Public upload</button>
      <button onclick="uploadSingleFile(this)">With captcha</button>
      <button onclick="uploadSingleFile(this)">With verifiable credential</button>
    </div>
  </section>
</body>

<script src="https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit" async defer></script>
<script>
  window.grecaptcha_widgets = { 'captcha--single_upload': undefined };
  function recaptchaCallback() {
    for (let x in window.grecaptcha_widgets) {
      window.grecaptcha_widgets[x] = grecaptcha.render(x, { 'sitekey': '6LfjSIwdAAAAAHISRIfFCoQBXayegVqbhAb6Vhgn' });
    }
  }
</script>
